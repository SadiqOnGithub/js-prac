<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <script defer src="index.js"></script>
  </head>
  <body>
    <h1 class="blink height">HELLO WORLD</h1>
    <button>click me</button>

    <style>
      body {
        text-align: center;
      }

      .blink {
        background-color: red;
      }

      h1 {
        display: inline-block;
        width: 500px;
      }

      button {
        display: inline;
      }

      .height {
        height: 60vh;
      }
    </style>
    <!-- <script>
      console.log("task queue starts ====================");
      // alert("1");

      console.log("step 1");

      setTimeout(() => {
        console.log("callback queue starts here ==================");

        // console.log(a);
        console.log("step 2");
      }, 0);
      console.log("step 2.1");

      let x = new Promise((resolve, reject) => {
        console.log("step 3");
        resolve("the promise");
        console.log("step 3.1");
      });
      console.log("step 3.2");

      let promisedData = x.then(function (res) {
        console.log("microtask queue starts here ==================");

        console.log("while microLoop starts");
        let microLoop = 0;
        while (microLoop < 1000000000) {
          microLoop++;
        }
        console.log("while microLoop done");
        
        function fooH(params) {
          if (params < 1) {
            console.log("fooH recursion done");
          } else {
            requestAnimationFrame(() => {
              console.log("fooH recursion :(", params);
              document.querySelector("h1").classList.toggle("height");
              fooH(params - 1);
            });
          }
        }
        console.log("fooH recursion kinks in");
        fooH(5);

        console.log("step 4");
        console.log({ res });
        console.log("step 4.1");

        return res;
      });
      console.log("step 4.2");

      forMicrotask();
      async function forMicrotask() {
        console.log("step 5");
        console.log(await promisedData);
        console.log("step 6");
        console.log(await promisedData);
        console.log("step 6.1.1");
        console.log(await promisedData);
        console.log("step 6.1.2");
        console.log(await promisedData);
        console.log("step 6.1.");

        return promisedData;
      }
      console.log("step 6.2");

      callingPromise();
      async function callingPromise() {
        console.log("step 7");
        let a = await promisedData;
        console.log("step 8");
        console.log({ a });
        console.log(await promisedData);
        console.log("step 8.1.1");
        console.log(await promisedData);
        console.log("step 8.1.2");
        console.log(await promisedData);
        console.log("step 8.1.3");
      }

      console.log("step 8.2");

      offLine();
      function offLine(params) {
        console.log("step 9");
      }


      // console.log("while loop2 starts");
      // let loop2 = 0;
      // while (loop2 < 1000000000) {
      //   loop2++;
      // }
      // console.log("while loop2 ends");


      function foo(params) {
        if (params < 1) {
          console.log("foo recursion done");
        } else {
          console.log("foo recursion :(", params);
          requestAnimationFrame(() => {
            document.querySelector("h1").classList.toggle("blink");
            foo(params - 1);
          });
        }
      }
      console.log("foo recursion kinks in");
      foo(5);


      // for (let i = 0; i < 100; i++) {}
      // console.log("for loop ");

      // alert("5");
      console.log("while lopp starts");
      let loop = 0;
      while (loop < 1000000000) {
        loop++;
      }
      console.log("while lopp done");


      console.log("task queue ends here ============================");
    </script> -->
  </body>
</html>
